# This workflow uses actions that are not certified by GitHub.
# They are provided by a third-party and are governed by
# separate terms of service, privacy policy, and support
# documentation.

name: Build Binaries - Windows

on:
  push:
    branches: [ "wip/create-install" ]
  pull_request:
    branches: [ "wip/create-install" ]

jobs:
  build:
    runs-on: windows-latest

    steps:
      - uses: actions/checkout@v3
      
      # - name: Install dependencies
      #   run: dart pub get

      # - uses: actions/setup-go@v3
      #   with:
      #     go-version: '>=1.17.0'
      # - run: go version

      # - name: Setup cmake
      #   uses: jwlawson/actions-setup-cmake@v1.13.1
      #   with:
      #     cmake-version: '3.26.x'
      # - name: Use cmake
      #   run: cmake --version

      - uses: subosito/flutter-action@v2
        with:
          channel: 'stable' # or: 'beta', 'dev' or 'master'
      - run: flutter --version
      - run: flutter config --enable-windows-desktop
      - run: flutter build windows

      # # Install PowerShell
      # # https://docs.microsoft.com/en-us/powershell/scripting/install/install-ubuntu?view=powershell-7.2
      # - run: |
      #     sudo apt-get update
      #     sudo apt-get install -y wget apt-transport-https software-properties-common
      #     wget -q "https://packages.microsoft.com/config/ubuntu/$(lsb_release -rs)/packages-microsoft-prod.deb"
      #     sudo dpkg -i packages-microsoft-prod.deb
      #     sudo apt-get update
      #     sudo apt-get install -y powershell

      # - name: Install dependencies
      #   run: flutter packages get
      
      # - id: runAllTests
      #   name: Run all tests
      #   run: |
      #     flutter test
